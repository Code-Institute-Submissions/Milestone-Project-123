**Testing** 

#### User Stories & Manual Testing

##### Site User:

###### As a user, I would like to view all and different types of german cars for sale.
When you go to 'Browse Cars' in the navbar and select 'All Cars', it will take the user to view all the german cars which will achieve the first part of this user story.
The second part of the user story will be achieved by clicking on 'Browse Cars' again in the navbar and selecting one of the four brands listed in the dropdown which are 'Volkswagen', 'Audi', 'BMW' and 'Mercedes-Benz'. it will take the user to the page with these types of german cars.

###### As a user, I would like to sort the cars so that I can view the cars in different order such as make, model, price and year.
* First, click on 'Browse Cars' in the navbar and select any of the links in the dropdown.
* Then, click on the 'Sort By' dropdown.
* Select 'Price(Low to High)' in the dropdown and as expected this sorted the listings based on how much the cars cost from lowest to highest.
* Select 'Price(High to Low)' in the dropdown and as expected this sorted the listings based on how much the cars cost from highest to lowest.
* Select 'Make(A-Z)' in the dropdown and as expected this sorted the listings in alphabetical order from A-Z depending on the make.
* Select 'Make(Z-A)' in the dropdown and as expected this sorted the listings in alphabetical order from Z-A depending on the make.
* Select 'Model(A-Z)' in the dropdown and as expected this sorted the listings in alphabetical order from A-Z depending on the model.
* Select 'Model(Z-A)' in the dropdown andas expected this sorted the listings in alphabetical order from Z-A depending on the model.
* Select 'Year(New to Old)' in the dropdown and as expected this sorted the listings in yearly order from the newest car to the oldest car.
* Select 'Year(Old to New)' in the dropdown and as expected this sorted the listings in yearly order from the oldest car to the newest car.

###### As a user, I would to be able to search for a car by make, model, year, transmission and fuel type.
* First, click on the search box in the top navbar.
* Type 'Audi' in the search box, it will then bring up 5 results for the make of this car as expected.
* Type '3 series' in the search box, it will then bring up 1 result for the model of this car as expected.
* Type '2016' in the search box, it will bring up 3 results for the cars made in this year as expected.
* Type 'manual' in the search box, it will bring up 6 results for the cars that have a manual transmission as expected.
* Type 'diesel' in the search box, it will bring up 8 results for the cars that need diesel fuel as expected.
* Type 'whips' in the search box and as expected it will bring up no results as this isn't a search query.

###### As a user, I want to be able to view the car's details so that I can view information such as mileage, transmission and fuel type.
When on a listings page for the cars for sale, if you click on a listing card for the car you want to view, it will take you to the car details page for that car as expected. On the individual car page, the car's mileage, transmission and fuel type will appear as expected. There will be car information section as well, which will include the relevant information such as registration, body type and more.

###### As a user, I would like to view all and different types of german car reviews.
When you go to 'Car Reviews' in the navbar and select 'All Reviews', it will take the user to view all the german car reviews which will achieve the first part of this user story.
The second part of the user story will be achieved by clicking on 'Car Reviews' again in the navbar and selecting one of the four brands listed in the dropdown which are 'Volkswagen Reviews', 'Audi Reviews', 'BMW Reviews' and 'Mercedes-Benz Reviews'. When one of these links are clicked, it will take the user to the page with these types of german car reviews.

###### As a user, I would like to sort the reviews so that I can view the reviews in different order such as make, model and year.
* First, click on 'Car Reviews' in the navbar and select any of the links in the dropdown.
* Then, click on the 'Sort By' dropdown.
* Select 'Make(A-Z)' in the dropdown and as expected this sorted the reviews in alphabetical order from A-Z depending on the make.
* Select 'Make(Z-A)' in the dropdown and as expected this sorted the reviews in alphabetical order from Z-A depending on the make.
* Select 'Model(A-Z)' in the dropdown and as expected this sorted the reviews in alphabetical order from A-Z depending on the model.
* Select 'Model(Z-A)' in the dropdown and as expected this sorted the reviews in alphabetical order from Z-A depending on the model.
* Select 'Year(New to Old)' in the dropdown and as expected this sorted the reviews in yearly order from the newest car review to the oldest car review.
* Select 'Year(Old to New)' in the dropdown and as expected this sorted the reviews in yearly order from the oldest car review to the newest car review.

###### As a user, I would to be able to search for a review by make, model and year.
* First, click on 'Car Reviews' in the navbar and select any of the links in the dropdown.
* Then, click on the review search box at the top of the page.
* Type 'bmw' in the search box, it will then bring up 3 reviews for the make of this car as expected.
* Type 'cls' in the search box, it will then bring up 1 review for the model of this car as expected.
* Type '2020' in the search box, it will bring up 8 reviews for the cars made in this year as expected.
* Type 'cars' in the search box and as expected it will bring up no reviews as this isn't a search query.

###### As a user, I want to be able to view the car review so that I can read the full review.
When on a reviews page, if the user clicks on a review card for the review they want to read, it will take them to the review page for that car as expected. On the individual car review page, they can read the full review included the advantage and disadvantage of the car.

###### As a user, I would like to register my own account so that I can make purchases and add cars that interest me to my wishlist and more.
* First, click on the 'My Account' icon and select 'Register'.
* When I complete the fields for email address and submit the form, as expected it doesnt submit the form as the other field haven't been completed.
* When I complete the both email fields and both password fields and submit, as expected it won't submit the form and asks to fill in the username field.
* Then, I will complete all the fields in the form and submit it, as expected it will return back to the register page as the password was too short and the password was too common as it was the same as my username.
* Now, I will complete all the fields and make sure my password is at least 8 characters long and not too common and will submit the form and as expected it was submitted properly and page stated a verification email was sent to my email.

###### As a user, I would like to be able to easily contact the site and would like different ways to.
* When 'Contact Us' is clicked in the navbar, it will take me to the page where you a collapsible will appear.
* Click on the first collapsible 'By Phone', it will open as expected and display the contact numbers.
* Then, click on the second collapsible 'By Email' and it will open the contact email address and the first collapsible will close as expected.
* Then, when the third collapsible 'By Post' is clicked, it will open the address to send to and the second collapsible will close as expected.

##### Account Holder:

###### As an account holder, I want to be able to receive a registration email so that I can verify the registration of my account.
* When I complete the registration form, a verification email is sent to my email account.
* When I log into my email, as expected I find the email to verify my account. 
* A link will appear in the email, when clicked it will take to me to the page confirm my account as expected and then return me to the log in page.
* Now when I log in, I can make purchases and add to the wishlist as expected.

###### As an account holder, I want to be able to login and logout of my account
Logging in, is easily done by clicking on the 'My Account' icon and select login, once on the login page a small form is presented which the user has to fill in with their username and password and then submit. This will log them into their personal account, a personalized message will appear to state they have logged in. 
They can logout by clicking on the 'My Account' icon and selecting logout which will take them to the logout page and they will just need click on the sign out button to complete logout and a message will appear to state this.

###### As an account holder, I want to be able to reset my password so that I can re-access my account.
This can be done by going on the login page and click on the 'Forgot Password?' link, which will require them to fill in their email address and then submit by clicking onto the 'Reset My Password' button. This will send a link to their email address and once they have opened the link they will find two fields to fill in for their password reset and then submit. Once submitted, it will successfullly return them to the login page.

###### As an account holder, I also want to be view my personal information such as default delivery address and my order history.
This is achieved for the account holder clicking on the 'My Account' icon when select 'My Account' in the dropdwom, which will take the account holder to the page where the default delivery form and order history is stored. 

###### As an account holder, I also want to be able to add cars for sale that I wish to buy to a wishlist.
First, I will go to the listings page and click on the car I am interested in and this will take me to the car's detail page as expectd.
Then, I will need to click on the 'Add to Wishlist' button and this will take me to the Wishlist with the car added as expected.
 
###### As an account holder, I also want to be able to remove cars from the wishlist.
This can be done by going to the Wishlist and selecting the remove button which will remove the car from the wishlist and a notifcation message will appear with what has been removed. When the car is brought by any user it will automatically remove the car from all wishlists.

##### Customer: 

###### As an customer, I would like to be able to purchase the german car I am interested in.
This is achieved by clicking on the 'Buy Now' button in the car's details page or the 'Purchase' button in the wishlist if its in the user's wishlist.
When on the purchase page, the user will see a purchase form and a small table with the summary of the car they are purchasing.

###### Purchase Order Form
* First, When I complete the full name field and click on the button to submit the form, it won't submit as expected as the other required fields haven't been completed.
* Then, I will complete the detail fields in the form and submit the form, as expected the form doesn't submit as the delivery required fields haven't been completed.
* Then, When I complete all the required fields in details and delivery and submit the form, as expected it doesn't submit as the payment information hasn't been filled in.
* Then, I will complete all the required fields including the details, delivery and payment and submit the form, and as expected the purchase goes through correctly.
* While the page is loading, an overlay with a spinning arrow appears showing that the order is being processed.
* Then it will go through to the order summary page when complete.
* When a car has been purchased, it will automatically be removed from the site.


###### Stripe
* These payments are also visible on the [Stripe Dashbord page](https://dashboard.stripe.com/payments). Verify in Stripe account that the payment was successful and that the webhooks were handled successfull

Note: Due to Stripe's testing features, If you would like to test the payment functionality of this project, please use the following payment details: - Card number: 4242 4242 4242 4242 - CVC: any 3 digit number - Exparation Date: any future date

###### As a customer, I would like to view a order summary when I complete my purchase.
When the purchase has been completed, a order summary will appear with the order number and date, the car purchased , the delivery information and the order total.

###### As a customer, I would like to receive a confirmation email when I place my order.
When the purchase has been completed, a message will appear stating a confirmation email has been sent. The confirmation email will include the order number, date, order total and  delivery information.

##### Store Owner:

###### As a store owner, I would like to be able to add german cars.
* First, I will click on the 'My Account' icon and select 'Car Management' in the dropdown.
* Then a add car form will appear where I can add the car.
* I will then select the brand from the dropdown and submit the form and as expected the car won't be added as the required fields haven't been completed.
* Then, I will complete the make field and submit the form and as expected the car wont be added as the other required fields havent been completed.
* Then, I will complete the make and model fields and submit the form and as expected the form won't submit as the other required fields haven't been completed.
* Then, I will complete all the required fields and as expected the car is added.
* When the car adds, it takes me to the car's detail page.

###### As a store owner, I would like to be able to edit german cars.
On the indivdual card in the page with the listings and the car's detail page, there will be a edit button in blue. When this is clicked it will allow the store owner to make any edits they require and then update the car. 
This will return them to to the updated car's page with a message to state which car has been updated.

###### As a store owner, I would like to be able to delete german cars.
On the indivdual card in the page with the listings and the car's detail page, there will be a delete button in red, when clicked it will delete the car from the system and return the store owner back to the all cars page.

###### As a store owner, I would like to be able to add german cars reviews.
* First, I will click on the 'My Account' icon and select 'Review Management' in the dropdown.
* Then a add review form will appear where I can add the review.
* I will then select the brand from the dropdown and submit the form and as expected the car review won't be added as the required fields haven't been completed.
* Then, I will complete the make field and submit the form and as expected the car review won't be added as the other required fields havent been completed.
* Then, I will complete the make and model fields and submit the form and as expected the form won't submit as the other required fields haven't been completed.
* Then, I will complete the make, model and review by fields and as expected the form won't submit as the last required field haven't been completed.
* Then, I will complete all the required fields and as expected the car review is added.
* When the review is added, it takes me to the car's review page.

###### As a store owner, I would like to be able to edit german cars reviews.
On the indivdual card in the page with the reviews and the car's review page, there will be a edit button in blue. When this is clicked it will allow the store owner to make any edits they require and then update the review. 
This will return them to to the updated car's review page with a message to state which car has been updated

###### As a store owner, I would like to be able to delete german cars reviews.
On the indivdual card in the page with the reviews and the car's review page, there will be a delete button in red, when clicked it will delete the review from the system and return the store owner back to the all reviews page.

##### Authentication
The site has been fully secured by only allowing superusers to access pages to perform CUD(create, update and delete) functionality. If a logged in user attempted to enter these pages the site will return them to the home page with message stating that only authorised users were allowed.

Throughout production of the site, different defense features were also added to protect the site. A **{% csrf_token %}** was added to every form to stop Cross Site Request Forgeries.
**@login_required** was added throughout production to many views to make sure that only users authenthicated were able to access this certain pages like making purchases, added to a wishlist or accessing someones personal account.
To make sure that all requests were getting their expected data, fields were made 'required' in forms and models so that fields were not left blank.

##### Bugs Found

During development and testing the website, these were the bugs found:

###### Review Search Box
When entering a query in the review search box and getting only one review or when on a single brand reviews page, the review card's displayed were too thin and not displaying as normal. The bug was that a </div> was missing, once this was rectified the review card's were returning as normal.

###### Footer
During testing, the footer was being raised on multiple pages that didnt fill the page content. To rectify this, changing the min-height from 100% to 100vh fixed this issue and kept the footer at the bottom on all pages.

###### No Image File
Another bug found during testing, was the no-image file wasn't displaying when adding a car to the site and not adding an image for the car. To recify this, an / was added to the end of 'media' in the MEDIAFILES_LOCATION variable in setting.py and this rectified the bug and the no-image file is now displaying when adding a car or review.

#### Websites & Devices Testing

This site was tested on multiple devices varying different screen sizes and also on multiple browsers successfullly. A small issue that was found that on mobile view the table was fitting on screen in the wishlist due to the options button, to fix this I have make the font size of the buttons smaller and this fixed the buttons to fit.

###### Web Browers:
* Google Chrome
* Safari
* Firefox
* Microsoft Edge
 
###### Devices:
* Iphone 7
* Iphone 8
* Samsung S10 Plus
* Acer Laptop
* Dell Computer

The testing conducted was to register a account, make a purchase and be able to add & remove from the wishlist.

#### Validation

###### [HTML](https://validator.w3.org/) 
An error that was coming up during testing repeatedly was due to the django templates, these brackets **{}** and **%** which caused a lot of the errors were needed for the syntax to access the static, css files and the data so these errors can be ignored. Another error that came up was the doctype and language not being declared in many of the html templates, but these files are included into the base.html where they are declared so this issue was also ignored. The templating language was causing the errors but because this was needed the errors were ignored.

###### [CSS](https://jigsaw.w3.org/css-validator/)
No errors were found during testing the css files.

###### [Javascript](https://jshint.com/)
No errors found during testing.

###### [Python](http://pep8online.com/) 
No major errors found in testing. Only line too long and whitespace warning.

