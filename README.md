## German Whips

#### My final milestone project is based on selling german cars and browsing through reviews about the newest german cars.

#### UX

##### User stories

**Below I have listed the user stories for my final milestone project.** 

###### Site User Stories 
As a user, I would like to view all and different types of german cars for sale.

As a user, I would like to sort the cars so that I can view the cars in different order such as make, model, price and year.

As a user, I would to be able to search for a car by make, model, year, transmission and fuel type.

As a user, I want to be able to view the car's details so that I can view information such as mileage, transmission and fuel type.

As a user, I would like to view all and different types of german car reviews.

As a user, I would like to sort the reviews so that I can view the reviews in different order such as make, model and year.

As a user, I would to be able to search for a review by make, model and year.

As a user, I want to be able to view the car review so that I can read the full review.

As a user, I would like to register my own account so that I can make purchases and add cars that interest me to my wishlist and more.

As a user, I would like to be able to easily contact the site and would like different ways to.

###### Account Holder Stories 
As an account holder, I want to be able to receive a registration email so that I can verify the registration of my account.

As an account holder, I want to be able to login and logout of my account

As an account holder, I want to be able to reset my password so that I can re-access my account.

As an account holder, I also want to be view my personal information such as default delivery address and my order history.

As an account holder, I also want to be able to add cars for sale that I wish to buy to a wishlist.

As an account holder, I also want to be able to remove cars from the wishlist.

###### Customer Stories 
As an customer, I would like to be able to purchase the german car I am interested in.

As a customer, I would like to view a order summary.

As a customer, I would like to receive a confirmation email when I place my order.

###### Store Owner Stories 
As a store owner, I would like to be able to add german cars.

As a store owner, I would like to be able to edit german cars.

As a store owner, I would like to be able to delete german cars.

As a store owner, I would like to be able to add german cars reviews.

As a store owner, I would like to be able to edit german cars reviews.

As a store owner, I would like to be able to delete german cars reviews.

##### Strategy
My strategy was to create a site where users can purchase and read reviews about german cars.

##### Scope
The site will be for users interested in german cars which are considered the best in the world. The user will be able to create an account to view their purchases, save their delivery information, purchase cars or add them to their own wishlist. They can also read reviews about the latest german cars as well.

##### Structure
The site's layout is as follows:
* The navbar is broken down into two sections, in the top navbar is the logo, a search box and the 'My Account' link to a dropdown of its functions. In the second navbar will be the links for browsing through the main pages of the site like 'Browse Cars' and 'Car Reviews' which when clicked will provide a dropdown of links of the german brands, 'Home' and 'Contact Us' links are also in this navbar, in between the navbars is a delvery banner.
* When the user clicks on the my account icon a dropdown will appear with two links 'Register' and 'Login' and when they have logged in there will three links 'My Account', 'Wishlist' and 'Logout'. If a store owner logged in, they will see two additional links 'Car Management' and 'Review Management'. 
* The home page will display a background image and some text with a 'Browse Now' button.
* On the 'All Cars' page, all the cars for sale will displayed. Here the user can see all the german cars for sale, on the left will be a listing count and on the right will be a sort dropdown. If the user clicked on the 'Browse Cars' in the navbar and in the dropdown clicked on one of the following links 'Volkwagen', 'BMW', 'Audi' or 'Mercedes-Benz' it will take the user to that brand page with the cars listed for that particular brand. The layout of each listing on these pages are done in a card format, there will be border around the card, an image of the car will take up the top half of the card and the bottom half will be the car's make, model, year and price with a tag of the brand.
* On the 'All Reviews' page, all the reviews will displayed. Here the user can see all the german car reviews, there will be a review search box and below on the left will be a review count and on the right will be a sort dropdown. If the user clicked on the 'Car Reviews' in the navbar and in the dropdown clicked on one of the following links 'Volkwagen Reviews', 'BMW Reviews', 'Audi Reviews' or 'Mercedes-Benz Reviews' it will take the user to that brand page with the reviews listed for that particular brand. The layout of each review on these pages are done in a card format, there will be border around the card, an image of the car will take up the top half of the card and the bottom half will be the car's make, model, year and who completed the review with a tag of the brand.
* When the store owner is on any of these pages for cars and reviews, at the bottom of each card there will be edit and delete links.
* On a single listings page, on the left they will see a bigger image of the car and on the right will be more information on the car such as the mileage, fuel type and transmission and the car's information. Below this will be two buttons 'Buy Now' and 'Wishlist'.
* on a single review page, on the left they will see a bigger image of the car and on the right will be a advantage and disadvantage of the car being reviewed and below this will be the review of the car.
* When on either a single listing or review, there will be a edit and delete links that a store owner can see and use, which will be below the disadvantage section.
* On the purchase page, on the the left will be the purchase form with the payment method at the bottom and on the right will be a small purchase summary.
* When the purchase is complete, it will display the order summary for the user with the order number included in this.
* The 'My Account' page will display a default delivery information form on the left and on the right their order history.
* On the 'Wishlist' page, when a car is added it will be in a row, with a small image being first from the left then the car infomation, then the price of the car and two buttons.
* On the 'Contact Us' page, it will display a collapsible with three blocks 'By Phone', 'By Email' and 'By Post'.

##### Skeleton

##### Surface
The colors that are used in the website are black and white with white being the dominant background color except in the delivery row and black being the dominant color of most of the text apart from the delivery row and text on the home page. I stuck with this colors as I think it gave the site a professional and efficient look and these are want german car are known for. The font that was used for the site was Gayathri, this was used as it was a professional style and was easily readable. The background image on the home page is of salesman shaking hands with a man and handing over car keys after completing a deal, this image was used as enticement for users to complete a deal to get a german car.

#### Features

##### Existing Features

**Bootstrap First Navbar**
The first navbar will include the logo on the left, the search box for cars in the middle and on th right the 'My Account' dropdown.

**Logo**
When click on the logo 'German Whips', it will return the user to the home page.

**Navbar Search Box**
This search box will allow the user to search for queries about the cars they would like to browse.

**'My Account' Dropdown**
This dropdown will allow the user to register or login to their account and after logging in will show the functions that the user has access to in their account such as their own wishlist.

**Bootstrap Second Navbar**
The links in the navbar and two dropdowns will take the user to the page they require.

**Bootstrap Mobile Nav**
When on a smaller device such as a tablet or mobile, the mobile nav will appear. There will be a search icon that when clicked will dropdown the search box instead and the hamburger icon when clicked will open the second navbar

**'Browse Now' Button**
When clicked, it will take the user to the page dislaying all cars for sale.

**Listings Count**
This will display how many cars are displaying and when a search query is made, the number of cars found.

**Review Count**
This will display how many reviews are displaying and when a search query is made, the number of reviews found.

**Cars Sort Dropdown**
This will allow the user to sort the cars by (A-Z) or (Z-A) for the make or model and they can sort the price from low to high or high to low. They can also sort the year from new to old or old to new. 

**Reviews Sort Dropdown**
This will allow the user to sort the reviews by (A-Z) or (Z-A) for the make or model and they can sort the year from new to old or old to new. 

**Reviews Search Box**
This search box will allow the user to search for queries about the reviews they would like to browse through.

**Listing Card**
When one of the car listings is clicked, it will take the user to the car detailed page of that listing.

**Review Card**
When one of the review listings is clicked, it will take the user to that review.

**Bootstrap Contact Collapsible**
When an collapsible is clicked, it will open the contact information for the user.

**Login/Register Forms**
These forms will allow the user to register an account and log in their account.

**'Buy Now' Button**
This button will take the user to the purchase form to buy the car.

**'Add to Wishlist' Button**
This button will added the car to the user's wishlist.

**Purchase Form**
This form will allow the user to fill in their delivery details and payment information to complete their purchase.

**Save Info Checkbox**
This checkbox in the purchase form when clicked will save the user delivery information to their account for future purchases.

**Default Delivery Form**
This form is where the user's delivery information will be stored, they can update it when they like and the information will appear in the purchase form.

**Order History**
This will display the user's purchase history when they place them so they know what they have bought.

**Wishlist Options**
The 'Remove' button which will remove the car from the wishlist and the purchase button which will take the user to the purchase page.

**Footer Social Links**
The links in the footer will allow the user to visit the app's social media platforms.

**Bootstrap Notifcations Toasts** 
The notifications would appear when the user have made a purchase, added to their wishlist and more.

###### Store Owner Features

**Car/Review Management**
These pages will display the add car/review forms for the store owner to add cars/reviews to the site.

**Edit/Remove Functions**
When the store owner clicks the edit link on a listing or review, it will take them to the edit form for it where they can edit the information. The remove link will delete the car or review from the site.

In addition, you may also use this section to discuss plans for additional features to be implemented in the future:

###### Features Left to Implement

**Bootstrap Carousel**
In future projects, I would like to add a carousel instead of a single image so that many images of the cars can be uploaded and viewed by the user.

#### Technologies Used

###### Languages

**HTML** 
This language was used to build the site and input content.

**CSS**
This was used to style to website and for media queries.

**Python** 
Python3 is used as programming language,and is used to run the backend of the site and its functions.

**Javascript**
This language was used to function the sort dropdown, used for stripe purposes and more.

###### Librarys & Frameworks

**Django**
This is the web framework used.

**JQuery**
This library was used to allow the bootstrap functions to work such as the notifcation toasts and the collapsible.

**Stripe**
This was used for functioning my payment method in the purchase app.

**SQlite3**
This was the database used in production in gitpod.

**PostgreSQL**
This was the database used in deployment on Heroku.

**Jinja** 
This was used as the templating language for python.

**AllAuth**
This was used for to create registration, account management and authenthication.

**Crispy-Forms** 
This was used to easily build the forms for my site.

**Font Awesome**
This icon library was used in my project to place icons like the 'My Account' icon and the footer social icons.

**Google Fonts**
This was used to include the font for my site 'Gayathri'.

**Heroku**
The site is hosted on Heroku.

**AWS S3 Bucket**
The media and css for this site is hosted on AWS.

Database Structure

In development with Django, I used the SQlite3 database and after deployment to Heroku the PostgreSQL database was used. 
The reason that a straight to purchase app was used instead of a checkout app was because car prices are in the thousands and it would be incredibly rare to buy two cars at one time.   
When every app and their models were added, the migrations commands were used to intially create the model package(python manage.py makemigrations) and then the table in the database(python manage.py migrate).
This project relied on Django default user model for authorisation, as one of the requirements in the were separating features by anonymous users, users in session and superusers.
The models were added to make sure they were not too many alterations to the table and databases through migrating, but throughout development fields some fields needed to be added, adjusted or deleted., 

Cars App: The models in this app were created to store all the cars on the site.

Brand Model
Name | Database Key | Field Type | Validation
Brand Name | brand_name | CharField | max_length=254

Car Model
Name | Database Key | Field Type | Validation
Brand Foreign Key | brand | ForeignKey | 'Brand', null=True, blank=True, on_delete=models.SET_NULL
SKU | sku | CharField | max_length=254, null=True, blank=True
Make | make | CharField | max_length=254 
Model | model | CharField | max_length=254
Year | year | IntergerField | null=True, blank=True
Mileage | mileage | CharField | max_length=254, null=True, blank=True
Fuel Type | fuel_type | CharField | max_length=254, null=True, blank=True
Transmission | transmission | CharField | max_length=254, null=True, blank=True
Description | description | TextField | null=True, blank=True
Price | price | DecimalField | max_digits=6, decimal_places=0
Image URL | image_url | URLField | max_length=1024, null=True, blank=True
Image | image | ImageField | null=True, blank=True
For Sale | for_sale | BooleanField | default=True

Purchase App: The model in this app was used to allow the user to make a purchase for a car.

Car_Order Model
Name | Database Key | Field Type | Validation
Car | car | ForeignKey | Car, null=False, blank=False, on_delete=models.CASCADE
User Profile | user_profile | ForeignKey | UserProfile, on_delete=models.SET_NULL, null=True, blank=True, related_name='orders'
Order Number | order_number | CharField | max_length=32, null=False, editable=False
Full Name | full_name | CharField | max_length=50, null=False, blank=False
Email Address | email | CharField | max_length=254, null=False, blank=False
Phone Number | phone_number | CharField | max_length=20, null=False, blank=False
Country | country | CountryField | blank_label='Country *', null=False, blank=False
Postcode | postcode | CharField | max_length=20, null=True, blank=True 
Town or City | town_or_city | CharField | max_length=40, null=False, blank=False 
Street Address 1 | street_address1 | CharField | max_length=80, null=False, blank=False 
Street Address 2 | street_address2 | CharField | max_length=80, null=True, blank=True 
County | county | CharField | max_length=80, null=True, blank=True 
Date Of Purchase | date_of_purchase | DateTimeField | auto_now_add=True
Total | total | DecimalField | max_digits=6, decimal_places=0, null=False, default=0 
Original Purchase | original_purchase | TextField | null=False, blank=False, default=''
Stripe | stripe_pid | CharField | max_length=254, null=False, blank=False, default='' 

Profile App: The models aim was to retrieve the account holder's default delivery information.

UserProfile Model
Name | Database Key | Field Type | Validation
User | user | OnetoOneField | User, on_delete=models.CASCADE
Phone Number | default_phone_number | CharField | max_length=20, null=True, blank=True
Street Address 1 | default_street_address1 | CharField | max_length=80, null=True, blank=True
Street Address 2| default_street_address2 | CharField | max_length=80, null=True, blank=True
Town or City | default_town_or_city | CharField | max_length=40, null=True, blank=True
County | default_county | CharField | max_length=80, null=True, blank=True
Postcode | default_postcode | CharField | max_length=20, null=True, blank=True
Country | default_country | CountryField | blank_label='Country', null=True, blank=True

Wishlist App: 

Wishlist Model
Name | Database Key | Field Type | Validation
Car | car | ForeignKey | Car, null=False, blank=False, on_delete=models.CASCADE
User Profile | user_profile | ForeignKey | UserProfile, on_delete=models.SET_NULL, null=True, blank=True

Review App: The model in this app was created to store all the reviews onto the site.

Review Model
Name | Database Key | Field Type | Validation
Brand | brand | ForeignKey | Brand, null=False, blank=False, on_delete=models.CASCADE 
Make | make | CharField | max_length=254 
Model | model | CharField | max_length=254
Year | year | IntegerField | null=True, blank=True
Advantage | advantage | CharField | max_length=254, null=True, blank=True
Disadvantage | disadvantage | CharField | max_length=254, null=True, blank=True
Review By | review_by | CharField | max_length=254
Car Review | car_review | TextField |
Image URL | image_url | URLField | max_length=1024, null=True, blank=True 
Image | image | ImageField | null=True, blank=True

Testing

Deployment

This site were developed in the gitpod environment. This site is hosted by GitHub, it is directly deployed via the master branch and it was used for version control and commits and then pushed to a repository in Github and also pushed straight to Heroku as well.

Run Locally
To run locally, You can clone this respository directly in the terminal of the environment you are using for code editing type: git clone Booksmart https://github.com/WHusssain937/Milestone-Project-4. To cut ties with this GitHub repository, type git remote rm origin into the terminal.

Heroku Deployment
1. First, you will need to register/login to Heroku.
2. Then, on your dashboard click on the 'New' button to create the app.
3. Name your app and select your region.
4. To be able to use the PostgreSQL database for Heroku deployment. Go to 'Resources', search and select it as a free add-on.
5. After the app has been created, go to settings and click on Reveal Config Variables' button to input the following values.
Key | Value
DATABASE_URL | Heroku Postgres Database URL
SECRET_KEY | Secret Key used for your Django project
STRIPE_PUBLIC_KEY| Obtained from your Stripe account
STRIPE_SECRET_KEY| Obtained from your Stripe account
STRIPE_WH_SECRET| Obtained from your Stripe account
6. Next, create a requirements.txt file in your gitpod terminal using the following command:  pip3 freeze --local > requirements.txt
7. Then, in the terminal create a Procfile with the following command: echo web: gunicorn german_whips.wsgi:application > Procfile
8. Then, in the terminal set up the database with PostgreSQL using the following commands:  python3 manage.py | makemigrations python3 manage.py migrate
9. You will need to create a superuser to access the admin. First, enter the following: python3 manage.py createsuperuser, then create the username and password for your superuser. 
10. Now, using the following command, you can test the cloned application to see if it works: python3 manage.py runserver
11. Commit your changes using the following commands: git add . | git commit -m "Add Message Here!"
12. In the gitpod terminal, login to Heroku with the following command: heroku login -i and enter your login credentials.
13. Once logged in, connect your Heroku app to your remote repository using the following command in the terminal: heroku git:remote -a <your app name here> 
14. Lastly, Push to Heroku with the following command in the terminal: git push heroku master  

Hosting With AWS
The static and media files for this project are held in AWS S3 Bucket. To host them as well, you will need to create a AWS account and then create your S3 Bucket and make sure you allow public access. 
The following environment variables will need to added to settings or .env file: 
USE_AWS (set to True)
AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY 

Sending Emails Using Gmail
To be able to send real emails, you will need to connect to a Gmail account. You will need to create/sign in to your Gmail account and then go to Google Account Security page, now create a two-step authenthication by creating a app password for the Django app. 
Lastly, you will need to add the following environment variables to your settings or .env file:
EMAIL_HOST_USER
EMAIL_HOST_PASS

Credits
Content
The text for section Y was copied from the Wikipedia article Z

Media
The photos used in this site were obtained from ...

Acknowledgements
I received inspiration for this project from X